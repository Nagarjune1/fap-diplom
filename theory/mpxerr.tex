\gdef\mpxshipout{\shipout\hbox\bgroup%
  \setbox0=\hbox\bgroup}%
\gdef\stopmpxshipout{\egroup  \dimen0=\ht0 \advance\dimen0\dp0
  \dimen1=\ht0 \dimen2=\dp0
  \setbox0=\hbox\bgroup
    \box0
    \ifnum\dimen0>0 \vrule width1sp height\dimen1 depth\dimen2 
    \else \vrule width1sp height1sp depth0sp\relax
    \fi\egroup
  \ht0=0pt \dp0=0pt \box0 \egroup}
\mpxshipout% line 25 ./diags.mp
$q_0$%
\stopmpxshipout
\mpxshipout% line 26 ./diags.mp
$q_1$%
\stopmpxshipout
\mpxshipout% line 27 ./diags.mp
$q_2$%
\stopmpxshipout
\mpxshipout% line 28 ./diags.mp
$q_3$%
\stopmpxshipout
\mpxshipout% line 29 ./diags.mp
$q_4$%
\stopmpxshipout
\mpxshipout% line 30 ./diags.mp
$q_5$%
\stopmpxshipout
\mpxshipout% line 33 ./diags.mp
$ h $%
\stopmpxshipout
\mpxshipout% line 34 ./diags.mp
$ e $%
\stopmpxshipout
\mpxshipout% line 35 ./diags.mp
$ l $%
\stopmpxshipout
\mpxshipout% line 36 ./diags.mp
$ l $%
\stopmpxshipout
\mpxshipout% line 37 ./diags.mp
$ o $%
\stopmpxshipout
\mpxshipout% line 46 ./diags.mp
$q_i$%
\stopmpxshipout
\mpxshipout% line 47 ./diags.mp
$q_{i+1}$%
\stopmpxshipout
\mpxshipout% line 50 ./diags.mp
$ x $%
\stopmpxshipout
\mpxshipout% line 52 ./diags.mp
$ y $%
\stopmpxshipout
\mpxshipout% line 61 ./diags.mp
$q_i$%
\stopmpxshipout
\mpxshipout% line 62 ./diags.mp
$q_{i+1}$%
\stopmpxshipout
\mpxshipout% line 65 ./diags.mp
$ x $%
\stopmpxshipout
\mpxshipout% line 67 ./diags.mp
$ \epsilon $%
\stopmpxshipout
\mpxshipout% line 76 ./diags.mp
$q_i$%
\stopmpxshipout
\mpxshipout% line 77 ./diags.mp
$q_{i+1}$%
\stopmpxshipout
\mpxshipout% line 80 ./diags.mp
$ x $%
\stopmpxshipout
\mpxshipout% line 82 ./diags.mp
$ y $%
\stopmpxshipout
\end{document}
